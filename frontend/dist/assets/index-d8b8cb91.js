import{d as V,r as v,c as A,o as $,a as w,b as T,e,w as N,f as L,t as O,g as ae,n as F,F as K,u as se,h as re,i as le,j as P,k as ne,l as I,m as ie,T as ce,p as de,q as ue,s as ve,v as pe}from"./vendor-24828a23.js";import{T as b,b as g}from"./utils-b3ab6b14.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const t of a)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&d(l)}).observe(document,{childList:!0,subtree:!0});function o(a){const t={};return a.integrity&&(t.integrity=a.integrity),a.referrerPolicy&&(t.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?t.credentials="include":a.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function d(a){if(a.ep)return;a.ep=!0;const t=o(a);fetch(a.href,t)}})();const fe="modulepreload",me=function(r){return"/"+r},U={},G=function(n,o,d){if(!o||o.length===0)return n();const a=document.getElementsByTagName("link");return Promise.all(o.map(t=>{if(t=me(t),t in U)return;U[t]=!0;const l=t.endsWith(".css"),x=l?'[rel="stylesheet"]':"";if(!!d)for(let E=a.length-1;E>=0;E--){const m=a[E];if(m.href===t&&(!l||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${t}"]${x}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":fe,l||(f.as="script",f.crossOrigin=""),f.href=t,document.head.appendChild(f),l)return new Promise((E,m)=>{f.addEventListener("load",E),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>n()).catch(t=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=t,window.dispatchEvent(l),!l.defaultPrevented)throw t})},ge=V("theme",()=>{const r=v(!1),n=v("blue"),o=v({posColor:b.defaults.posColor,correctColor:b.defaults.correctColor,errorColor:b.defaults.errorColor,answerColor:b.defaults.answerColor}),d=A(()=>b.colorThemes[n.value]||b.colorThemes.blue),a=A(()=>{const s=d.value;return{"--color-primary":s.primary,"--color-secondary":s.secondary,"--color-accent":s.accent,"--color-pos":o.value.posColor,"--color-correct":o.value.correctColor,"--color-error":o.value.errorColor,"--color-answer":o.value.answerColor,"--app-bg-color":r.value?b.darkModeBackgrounds[n.value]:b.lightModeBackgrounds[n.value],"--main-bg-color":r.value?b.darkModeBackgrounds[n.value]:"#ffffff","--text-color":r.value?"#f7fafc":"#1a202c","--card-bg-color":r.value?b.darkModeBackgrounds[n.value].replace("0f","1e"):"#ffffff","--border-color":r.value?b.darkModeBackgrounds[n.value].replace("0f","3a"):"#e2e8f0"}}),t=()=>{r.value=!r.value,y(),f()},l=s=>{b.colorThemes[s]&&(n.value=s,y(),f())},x=(s,h)=>{o.value[s]!==void 0&&(o.value[s]=h,y(),f())},y=()=>{const s=document.documentElement;Object.entries(a.value).forEach(([h,R])=>{s.style.setProperty(h,R)})},f=()=>{const s={darkMode:r.value,colorTheme:n.value,posColor:o.value.posColor,correctColor:o.value.correctColor,errorColor:o.value.errorColor,answerColor:o.value.answerColor};g.send("saveSettings",s)};return{isDarkMode:r,currentTheme:n,customColors:o,themeColors:d,cssVariables:a,toggleDarkMode:t,setTheme:l,setCustomColor:x,updateCssVariables:y,saveToBackend:f,loadFromBackend:s=>{s.darkMode!==void 0&&(r.value=s.darkMode),s.colorTheme&&(n.value=s.colorTheme),s.posColor&&(o.value.posColor=s.posColor),s.correctColor&&(o.value.correctColor=s.correctColor),s.errorColor&&(o.value.errorColor=s.errorColor),s.answerColor&&(o.value.answerColor=s.answerColor),y()},initializeTheme:()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(r.value=!0),y(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{r.value=s.matches,y()})}}}),u={FILE_FORMATS:{TXT:".txt",WDLST:".wdlst"},LEARNING_STATES:{IDLE:"idle",LOADING:"loading",ANSWERED:"answered",REVIEWING:"reviewing",COMPLETED:"completed"},FEEDBACK_TYPES:{CORRECT:"correct",INCORRECT:"incorrect",SHOW_ANSWER:"show_answer",HINT:"hint"},MESSAGE_TYPES:{GET_RANDOM_WORD:"getRandomWord",SUBMIT_ANSWER:"submitAnswer",SHOW_ANSWER:"showAnswer",LOAD_WORDS_FILE:"loadWordsFile",SAVE_SETTINGS:"saveSettings",EXPORT_WRONG_WORDS:"exportWrongWords",RESET_PROGRESS:"resetProgress",GET_STATS:"getStats",GET_ALL_WORDS:"getAllWords",WORD_LOADED:"wordLoaded",ANSWER_RESULT:"answerResult",ANSWER_SHOWN:"answerShown",WORDS_LOADED:"wordsLoaded",STATS_UPDATED:"statsUpdated",ALL_WORDS:"allWords",PROGRESS_RESET:"progressReset",ERROR:"error"},ERROR_CODES:{FILE_NOT_FOUND:1001,FILE_PARSE_ERROR:1002,NETWORK_ERROR:1003,UNKNOWN_ERROR:9999}},z=V("word",()=>{const r=v(null),n=v(u.LEARNING_STATES.IDLE),o=v(""),d=v(""),a=v(""),t=v({totalWords:0,masteredWords:0,wrongWords:0,remainingWords:0,progress:0}),l=v([]),x=v([]),y=A(()=>n.value===u.LEARNING_STATES.IDLE),f=A(()=>a.value===u.FEEDBACK_TYPES.CORRECT),E=A(()=>r.value&&r.value.word),m=async()=>{n.value=u.LEARNING_STATES.LOADING,o.value="",d.value="",a.value="",g.send(u.MESSAGE_TYPES.GET_RANDOM_WORD,{})},s=async()=>{!o.value.trim()||!r.value||(n.value=u.LEARNING_STATES.ANSWERED,g.send(u.MESSAGE_TYPES.SUBMIT_ANSWER,{answer:o.value,currentWord:r.value.word}))},h=()=>{r.value&&(n.value=u.LEARNING_STATES.REVIEWING,g.send(u.MESSAGE_TYPES.SHOW_ANSWER,{currentWord:r.value.word}))},R=async c=>{g.send(u.MESSAGE_TYPES.LOAD_WORDS_FILE,{filename:c})},D=()=>{g.send(u.MESSAGE_TYPES.RESET_PROGRESS,{})},p=()=>{g.send(u.MESSAGE_TYPES.GET_ALL_WORDS,{})},_=c=>{r.value=c,n.value=u.LEARNING_STATES.IDLE,o.value="",d.value="",a.value=""},C=c=>{d.value=c.message,a.value=c.correct?u.FEEDBACK_TYPES.CORRECT:u.FEEDBACK_TYPES.INCORRECT},S=c=>{t.value={...t.value,...c}},W=c=>{l.value=c};return{currentWord:r,learningState:n,userAnswer:o,feedback:d,feedbackType:a,stats:t,allWords:l,wrongWords:x,isInputEnabled:y,isAnswerCorrect:f,hasCurrentWord:E,loadRandomWord:m,submitAnswer:s,showAnswer:h,loadWordsFile:R,resetProgress:D,getAllWords:p,updateCurrentWord:_,updateAnswerResult:C,updateStats:S,updateAllWords:W,initialize:()=>{g.on(u.MESSAGE_TYPES.WORD_LOADED,c=>{_(c)}),g.on(u.MESSAGE_TYPES.ANSWER_RESULT,c=>{C(c)}),g.on(u.MESSAGE_TYPES.ANSWER_SHOWN,c=>{d.value=`正确答案: ${c.correctAnswer}`,a.value=u.FEEDBACK_TYPES.SHOW_ANSWER}),g.on(u.MESSAGE_TYPES.STATS_UPDATED,c=>{S(c)}),g.on(u.MESSAGE_TYPES.ALL_WORDS,c=>{W(c)}),g.on(u.MESSAGE_TYPES.PROGRESS_RESET,()=>{m()}),g.send(u.MESSAGE_TYPES.GET_STATS,{})}}}),B={appName:"Word Memorizer",version:"2.1.1",apiBaseUrl:"http://localhost:8080",theme:{default:"light",available:["light","dark","blue"]},defaultFileFormat:"json",supportedFileFormats:["json","csv","txt"]};const H=(r,n)=>{const o=r.__vccOpts||r;for(const[d,a]of n)o[d]=a;return o},ye={class:"text-center"},Ee={class:"text-gray-600 dark:text-gray-400 mb-4"},_e={class:"space-y-2 text-sm"},be={class:"text-xl font-bold mb-4"},Se={class:"text-gray-600 dark:text-gray-400 mb-6"},xe={class:"flex justify-end space-x-3"},he=["accept"],ke={__name:"DialogSystem",setup(r,{expose:n}){const o=z(),d=v(!1),a=v(!1),t=v(!1),l=v(!1),x=v(""),y=v(""),f=v("确认"),E=v("primary"),m=v(null),s=v(null),h=A(()=>B),R=A(()=>B.supportedFileFormats.join(",")),D=()=>{d.value=!0},p=()=>{d.value=!1},_=()=>{a.value=!0},C=()=>{a.value=!1},S=()=>{t.value=!0},W=()=>{t.value=!1},M=(k,i,ee="确认",te="primary",oe=null)=>{x.value=k,y.value=i,f.value=ee,E.value=te,m.value=oe,l.value=!0},c=()=>{l.value=!1,m.value=null},q=()=>{m.value&&m.value(!0),c()},X=()=>{m.value&&m.value(!1),c()},J=()=>{var k;(k=s.value)==null||k.click(),p()},Q=k=>{const i=k.target.files[0];i&&o.loadWordsFile(i.path||i.name),k.target.value=""},Z=()=>{window.dialogSystem={openFileDialog:D,openAboutDialog:_,openUsageDialog:S,openConfirmDialog:M}},Y=k=>{k.key==="Escape"&&(d.value&&p(),a.value&&C(),t.value&&W(),l.value&&c())};return $(()=>{Z(),document.addEventListener("keydown",Y)}),onUnmounted(()=>{document.removeEventListener("keydown",Y)}),n({openFileDialog:D,openAboutDialog:_,openUsageDialog:S,openConfirmDialog:M}),(k,i)=>(w(),T(K,null,[d.value?(w(),T("div",{key:0,class:"dialog-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:p},[e("div",{class:"dialog-content card p-6 max-w-md w-full mx-4",onClick:i[0]||(i[0]=N(()=>{},["stop"]))},[i[5]||(i[5]=e("h3",{class:"text-xl font-bold mb-4"},"选择单词库文件",-1)),e("div",{class:"space-y-4"},[i[4]||(i[4]=e("div",{class:"file-types"},[e("h4",{class:"font-medium mb-2"},"支持的文件格式:"),e("ul",{class:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400"},[e("li",null,"文本文件 (.txt) - 格式: 单词|词性|释义|例句"),e("li",null,"WDLST 文件 (.wdlst) - 高级单词库格式")])],-1)),e("div",{class:"flex justify-end space-x-3"},[e("button",{onClick:p,class:"btn btn-secondary"}," 取消 "),e("button",{onClick:J,class:"btn btn-primary"}," 选择文件 ")])])])])):L("",!0),a.value?(w(),T("div",{key:1,class:"dialog-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:C},[e("div",{class:"dialog-content card p-6 max-w-md w-full mx-4",onClick:i[1]||(i[1]=N(()=>{},["stop"]))},[e("div",ye,[i[7]||(i[7]=e("div",{class:"text-6xl mb-4"},"📚",-1)),i[8]||(i[8]=e("h3",{class:"text-2xl font-bold mb-2"},"VocabMemster",-1)),e("p",Ee," 版本 "+O(h.value.version),1),i[9]||(i[9]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-6"}," 简约高效的单词背诵工具 ",-1)),e("div",_e,[e("p",null,"开发者: "+O(h.value.author),1),i[6]||(i[6]=e("p",null,"许可证: MIT License",-1))])]),e("div",{class:"flex justify-center mt-6"},[e("button",{onClick:C,class:"btn btn-primary"}," 关闭 ")])])])):L("",!0),t.value?(w(),T("div",{key:2,class:"dialog-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:W},[e("div",{class:"dialog-content card p-6 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:i[2]||(i[2]=N(()=>{},["stop"]))},[i[10]||(i[10]=ae('<h3 class="text-2xl font-bold mb-6" data-v-90730617>使用说明</h3><div class="space-y-6" data-v-90730617><section data-v-90730617><h4 class="text-lg font-semibold mb-3 text-blue-600" data-v-90730617>🎯 基本操作</h4><ul class="space-y-2 text-sm" data-v-90730617><li data-v-90730617><strong data-v-90730617>开始学习</strong>: 通过菜单加载单词库文件</li><li data-v-90730617><strong data-v-90730617>回答单词</strong>: 在输入框中输入英文单词，按回车或点击提交</li><li data-v-90730617><strong data-v-90730617>导航控制</strong>: 使用&quot;下一个单词&quot;加载新词，&quot;查看答案&quot;显示正确答案</li></ul></section><section data-v-90730617><h4 class="text-lg font-semibold mb-3 text-green-600" data-v-90730617>⌨️ 快捷键</h4><div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm" data-v-90730617><div class="flex justify-between" data-v-90730617><span data-v-90730617>Ctrl + Tab</span><span class="text-gray-600" data-v-90730617>下一个单词</span></div><div class="flex justify-between" data-v-90730617><span data-v-90730617>Alt + S</span><span class="text-gray-600" data-v-90730617>显示答案</span></div><div class="flex justify-between" data-v-90730617><span data-v-90730617>Ctrl + Shift + D</span><span class="text-gray-600" data-v-90730617>切换主题</span></div><div class="flex justify-between" data-v-90730617><span data-v-90730617>Alt + O</span><span class="text-gray-600" data-v-90730617>打开单词库</span></div><div class="flex justify-between" data-v-90730617><span data-v-90730617>Alt + E</span><span class="text-gray-600" data-v-90730617>导出错词本</span></div><div class="flex justify-between" data-v-90730617><span data-v-90730617>Enter</span><span class="text-gray-600" data-v-90730617>提交答案</span></div></div></section><section data-v-90730617><h4 class="text-lg font-semibold mb-3 text-red-600" data-v-90730617>📊 学习功能</h4><ul class="space-y-2 text-sm" data-v-90730617><li data-v-90730617><strong data-v-90730617>进度跟踪</strong>: 实时显示学习进度和统计信息</li><li data-v-90730617><strong data-v-90730617>错词本</strong>: 自动记录拼写错误的单词</li><li data-v-90730617><strong data-v-90730617>派生词检测</strong>: 自动检测并学习单词的派生形式</li></ul></section><section data-v-90730617><h4 class="text-lg font-semibold mb-3 text-purple-600" data-v-90730617>📝 文件格式</h4><p class="text-sm mb-2" data-v-90730617>单词库文件为文本格式，每行一个单词:</p><code class="block bg-gray-100 dark:bg-gray-800 p-3 rounded text-sm mb-2" data-v-90730617> apple|n.|苹果|I eat an apple every day. </code><code class="block bg-gray-100 dark:bg-gray-800 p-3 rounded text-sm" data-v-90730617> run|v.|跑步|He runs in the park every morning. </code></section></div>',2)),e("div",{class:"flex justify-center mt-6"},[e("button",{onClick:W,class:"btn btn-primary"}," 关闭 ")])])])):L("",!0),l.value?(w(),T("div",{key:3,class:"dialog-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:c},[e("div",{class:"dialog-content card p-6 max-w-md w-full mx-4",onClick:i[3]||(i[3]=N(()=>{},["stop"]))},[e("h3",be,O(x.value),1),e("p",Se,O(y.value),1),e("div",xe,[e("button",{onClick:X,class:"btn btn-secondary"}," 取消 "),e("button",{onClick:q,class:F(["btn",E.value==="danger"?"btn-danger":"btn-primary"])},O(f.value),3)])])])):L("",!0),e("input",{type:"file",ref_key:"fileInput",ref:s,onChange:Q,accept:R.value,class:"hidden"},null,40,he)],64))}},we=H(ke,[["__scopeId","data-v-90730617"]]);const Te={class:"app-header bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},Ce={class:"container mx-auto px-4 py-3"},Ae={class:"flex items-center justify-between"},Re={class:"flex items-center space-x-3"},De={class:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded"},We={class:"flex items-center space-x-1"},Oe=["onClick"],Le={class:"flex items-center space-x-3"},Ne=["title"],Me={key:0},Pe={key:1},Ie={class:"relative"},Ge={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50"},Fe={class:"app-main flex-1 overflow-auto"},Be={__name:"App",setup(r){const n=se(),o=ge(),d=z(),a=B,t=v("learning"),l=v(!1),x=[{name:"学习",route:"learning"},{name:"单词管理",route:"word-manager"},{name:"设置",route:"settings"}],y=A(()=>({"app-container":!0,"h-screen":!0,flex:!0,"flex-col":!0,dark:o.isDarkMode,[`theme-${o.currentTheme}`]:!0})),f=p=>{t.value=p,n.push({name:p})},E=()=>{o.toggleDarkMode()},m=()=>{g.send("loadWordsFile",{}),l.value=!1},s=()=>{confirm("确定要重置所有学习进度吗？此操作不可撤销。")&&g.send("resetProgress",{}),l.value=!1},h=()=>{console.log("打开使用说明"),l.value=!1},R=()=>{console.log("打开关于对话框"),l.value=!1},D=p=>{p.ctrlKey&&p.key==="Tab"?(p.preventDefault(),t.value==="learning"&&d.loadRandomWord()):p.altKey&&p.key==="s"?(p.preventDefault(),t.value==="learning"&&d.showAnswer()):p.ctrlKey&&p.shiftKey&&p.key==="D"&&(p.preventDefault(),E())};return $(()=>{document.addEventListener("keydown",D),o.initializeTheme()}),re(()=>{document.removeEventListener("keydown",D)}),(p,_)=>{const C=le("router-view");return w(),T("div",{class:F(y.value)},[e("header",Te,[e("div",Ce,[e("div",Ae,[e("div",Re,[_[1]||(_[1]=e("h1",{class:"text-xl font-bold text-gray-900 dark:text-white"}," VocabMemster ",-1)),e("span",De," v"+O(P(a).version),1)]),e("nav",We,[(w(),T(K,null,ne(x,S=>e("button",{key:S.name,onClick:W=>f(S.route),class:F(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",t.value===S.route?"bg-blue-500 text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"])},O(S.name),11,Oe)),64))]),e("div",Le,[e("button",{onClick:E,class:"p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:P(o).isDarkMode?"切换到浅色模式":"切换到深色模式"},[P(o).isDarkMode?(w(),T("span",Me,"🌙")):(w(),T("span",Pe,"☀️"))],8,Ne),e("div",Ie,[e("button",{onClick:_[0]||(_[0]=S=>l.value=!l.value),class:"p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"}," ⋮ "),I(ce,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:ie(()=>[l.value?(w(),T("div",Ge,[e("button",{onClick:m,class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}," 打开单词库 "),e("button",{onClick:s,class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}," 重置进度 "),_[2]||(_[2]=e("hr",{class:"my-1 border-gray-200 dark:border-gray-600"},null,-1)),e("button",{onClick:h,class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}," 使用说明 "),e("button",{onClick:R,class:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}," 关于 ")])):L("",!0)]),_:1})])])])])]),e("main",Fe,[I(C)]),I(we)],2)}}},je=H(Be,[["__scopeId","data-v-838c6e73"]]);const Ye=de(),Ue=ue({history:ve(),routes:[{path:"/",name:"learning",component:()=>G(()=>import("./LearningView-bf8576a5.js"),["assets/LearningView-bf8576a5.js","assets/vendor-24828a23.js","assets/utils-b3ab6b14.js","assets/LearningView-f3677fc4.css"])},{path:"/settings",name:"settings",component:()=>G(()=>import("./SettingsView-3b69f022.js"),["assets/SettingsView-3b69f022.js","assets/utils-b3ab6b14.js","assets/vendor-24828a23.js","assets/SettingsView-10f08e2f.css"])},{path:"/word-manager",name:"word-manager",component:()=>G(()=>import("./WordManagerView-68791667.js"),["assets/WordManagerView-68791667.js","assets/vendor-24828a23.js","assets/utils-b3ab6b14.js","assets/WordManagerView-c7ec4bb1.css"])}]}),j=pe(je);j.use(Ye);j.use(Ue);j.mount("#app");document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{const r=document.getElementById("loading");r&&(r.style.opacity="0",setTimeout(()=>r.remove(),300))},500)});export{B as A,H as _,z as a,ge as u};
